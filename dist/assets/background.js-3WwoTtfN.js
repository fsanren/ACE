chrome.runtime.onInstalled.addListener(()=>{console.log("Background script loaded")});chrome.action.onClicked.addListener(e=>{console.log("Action clicked, opening side panel on tab:",e.id),chrome.sidePanel.open({windowId:e.windowId})});chrome.tabs.onActivated.addListener(e=>{console.log("Action clicked, executing script on tab:",e.tabId),chrome.scripting.executeScript({target:{tabId:e.tabId},function:n},o=>{if(chrome.runtime.lastError){console.error("Script execution error:",chrome.runtime.lastError.message);return}o&&o[0]&&o[0].result?(console.log("Page content retrieved:",o[0].result),chrome.storage.local.set({pageContent:o[0].result})):console.error("Failed to retrieve page content")})});function n(){return console.log("Getting page content"),document.body.innerText}
